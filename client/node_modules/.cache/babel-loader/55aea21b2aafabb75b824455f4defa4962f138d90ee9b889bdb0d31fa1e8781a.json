{"ast":null,"code":"import\"./styles.css\";import React,{useEffect,useState}from\"react\";import{BrowserRouter,Routes,Route}from\"react-router-dom\";import api from\"./api\";import Header from\"./components/Header\";import Home from\"./components/Home\";import Appointment from\"./components/Appointment\";import Login from\"./components/Login\";import AdminDashboard from\"./components/AdminDashboard\";import PatientDashboard from\"./components/PatientDashboard\";import ServiceModal from\"./components/ServiceModal\";import ServiceDetails from\"./pages/serviceDetails\";// new page\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function App(){const[activePage,setActivePage]=useState(\"home\");const[user,setUser]=useState(null);const[patients,setPatients]=useState([]);const[appointments,setAppointments]=useState([]);const[treatments,setTreatments]=useState([]);const[medicines,setMedicines]=useState([]);const isAdmin=(user===null||user===void 0?void 0:user.role)===\"admin\";// Load admin datasets\nconst loadAdminData=async()=>{if(!isAdmin)return;const[p,a,t,m]=await Promise.all([api.get(\"/patients\"),api.get(\"/appointments\"),api.get(\"/treatments\"),api.get(\"/medicines\")]);setPatients(p.data);setAppointments(a.data);setTreatments(t.data);setMedicines(m.data);};useEffect(()=>{loadAdminData();},[isAdmin]);const handleLogin=async(email,password)=>{console.log(\"Logging in with\",email,password);try{console.log(\"Attempting login...\");const{data}=await api.post(\"/auth/login\",{email,password});console.log(\"Login successful:\",data);localStorage.setItem(\"token\",data.token);setUser(data.user);setActivePage(data.user.role===\"admin\"?\"admin\":\"patient\");}catch(e){alert(\"Invalid credentials\");}};const logout=()=>{localStorage.removeItem(\"token\");setUser(null);setActivePage(\"home\");};const createAppointment=async payload=>{const{data}=await api.post(\"/appointments\",payload);alert(\"Appointment booked!\");if(isAdmin)setAppointments([data,...appointments]);};const addPatient=async payload=>{const{data}=await api.post(\"/patients\",payload);setPatients([data,...patients]);};const addTreatment=async payload=>{const{data}=await api.post(\"/treatments\",payload);setTreatments([data,...treatments]);};const addMedicine=async payload=>{const{data}=await api.post(\"/medicines\",payload);setMedicines([data,...medicines]);};const updateAppointmentStatus=async(id,status)=>{const{data}=await api.patch(\"/appointments/\".concat(id,\"/status\"),{status});setAppointments(appointments.map(a=>a._id===id?data:a));};const updateMedicineStock=async(id,stock)=>{const{data}=await api.patch(\"/medicines/\".concat(id,\"/stock\"),{stock});setMedicines(medicines.map(m=>m._id===id?data:m));};return/*#__PURE__*/_jsxs(BrowserRouter,{children:[/*#__PURE__*/_jsx(Header,{activePage:activePage,setActivePage:setActivePage,user:user,logout:logout}),/*#__PURE__*/_jsx(\"main\",{className:\"container\",children:/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/\",element:/*#__PURE__*/_jsx(Home,{setActivePage:setActivePage})}),/*#__PURE__*/_jsx(Route,{path:\"/appointment\",element:/*#__PURE__*/_jsx(Appointment,{onCreate:createAppointment})}),/*#__PURE__*/_jsx(Route,{path:\"/login\",element:/*#__PURE__*/_jsx(Login,{onLogin:handleLogin})}),/*#__PURE__*/_jsx(Route,{path:\"/services/:id\",element:/*#__PURE__*/_jsx(ServiceDetails,{})}),/*#__PURE__*/_jsx(Route,{path:\"/admin\",element:isAdmin?/*#__PURE__*/_jsx(AdminDashboard,{patients:patients,appointments:appointments,treatments:treatments,medicines:medicines,addPatient:addPatient,addTreatment:addTreatment,addMedicine:addMedicine,updateAppointmentStatus:updateAppointmentStatus,updateMedicineStock:updateMedicineStock}):/*#__PURE__*/_jsx(Login,{onLogin:handleLogin})}),/*#__PURE__*/_jsx(Route,{path:\"/patient\",element:(user===null||user===void 0?void 0:user.role)===\"patient\"?/*#__PURE__*/_jsx(PatientDashboard,{}):/*#__PURE__*/_jsx(Login,{onLogin:handleLogin})})]})})]});}export default App;","map":{"version":3,"names":["React","useEffect","useState","BrowserRouter","Routes","Route","api","Header","Home","Appointment","Login","AdminDashboard","PatientDashboard","ServiceModal","ServiceDetails","jsx","_jsx","jsxs","_jsxs","App","activePage","setActivePage","user","setUser","patients","setPatients","appointments","setAppointments","treatments","setTreatments","medicines","setMedicines","isAdmin","role","loadAdminData","p","a","t","m","Promise","all","get","data","handleLogin","email","password","console","log","post","localStorage","setItem","token","e","alert","logout","removeItem","createAppointment","payload","addPatient","addTreatment","addMedicine","updateAppointmentStatus","id","status","patch","concat","map","_id","updateMedicineStock","stock","children","className","path","element","onCreate","onLogin"],"sources":["C:/Users/priya/Desai-Full-Project/client/src/App.js"],"sourcesContent":["import \"./styles.css\";\nimport React, { useEffect, useState } from \"react\";\nimport { BrowserRouter, Routes, Route } from \"react-router-dom\";\nimport api from \"./api\";\nimport Header from \"./components/Header\";\nimport Home from \"./components/Home\";\nimport Appointment from \"./components/Appointment\";\nimport Login from \"./components/Login\";\nimport AdminDashboard from \"./components/AdminDashboard\";\nimport PatientDashboard from \"./components/PatientDashboard\";\nimport ServiceModal from \"./components/ServiceModal\";\nimport ServiceDetails from \"./pages/serviceDetails\"; // new page\n\nfunction App() {\n  const [activePage, setActivePage] = useState(\"home\");\n  const [user, setUser] = useState(null);\n  const [patients, setPatients] = useState([]);\n  const [appointments, setAppointments] = useState([]);\n  const [treatments, setTreatments] = useState([]);\n  const [medicines, setMedicines] = useState([]);\n  const isAdmin = user?.role === \"admin\";\n\n  // Load admin datasets\n  const loadAdminData = async () => {\n    if (!isAdmin) return;\n    const [p, a, t, m] = await Promise.all([\n      api.get(\"/patients\"),\n      api.get(\"/appointments\"),\n      api.get(\"/treatments\"),\n      api.get(\"/medicines\"),\n    ]);\n    setPatients(p.data);\n    setAppointments(a.data);\n    setTreatments(t.data);\n    setMedicines(m.data);\n  };\n\n  useEffect(() => {\n    loadAdminData();\n  }, [isAdmin]);\n\n  const handleLogin = async (email, password) => {\n    console.log(\"Logging in with\", email, password);\n    try {\n      console.log(\"Attempting login...\");\n      const { data } = await api.post(\"/auth/login\", { email, password });\n      console.log(\"Login successful:\", data);\n      localStorage.setItem(\"token\", data.token);\n\n      setUser(data.user);\n      setActivePage(data.user.role === \"admin\" ? \"admin\" : \"patient\");\n    } catch (e) {\n      alert(\"Invalid credentials\");\n    }\n  };\n\n  const logout = () => {\n    localStorage.removeItem(\"token\");\n    setUser(null);\n    setActivePage(\"home\");\n  };\n\n  const createAppointment = async (payload) => {\n    const { data } = await api.post(\"/appointments\", payload);\n    alert(\"Appointment booked!\");\n    if (isAdmin) setAppointments([data, ...appointments]);\n  };\n\n  const addPatient = async (payload) => {\n    const { data } = await api.post(\"/patients\", payload);\n    setPatients([data, ...patients]);\n  };\n\n  const addTreatment = async (payload) => {\n    const { data } = await api.post(\"/treatments\", payload);\n    setTreatments([data, ...treatments]);\n  };\n\n  const addMedicine = async (payload) => {\n    const { data } = await api.post(\"/medicines\", payload);\n    setMedicines([data, ...medicines]);\n  };\n\n  const updateAppointmentStatus = async (id, status) => {\n    const { data } = await api.patch(`/appointments/${id}/status`, { status });\n    setAppointments(appointments.map((a) => (a._id === id ? data : a)));\n  };\n\n  const updateMedicineStock = async (id, stock) => {\n    const { data } = await api.patch(`/medicines/${id}/stock`, { stock });\n    setMedicines(medicines.map((m) => (m._id === id ? data : m)));\n  };\n\n  return (\n    <BrowserRouter>\n      <Header\n        activePage={activePage}\n        setActivePage={setActivePage}\n        user={user}\n        logout={logout}\n      />\n\n      <main className=\"container\">\n        <Routes>\n          {/* Public routes */}\n          <Route path=\"/\" element={<Home setActivePage={setActivePage} />} />\n          <Route\n            path=\"/appointment\"\n            element={<Appointment onCreate={createAppointment} />}\n          />\n          <Route path=\"/login\" element={<Login onLogin={handleLogin} />} />\n\n          {/* Service details (new feature) */}\n          <Route path=\"/services/:id\" element={<ServiceDetails />} />\n\n          {/* Admin / Patient handled via activePage */}\n          <Route\n            path=\"/admin\"\n            element={\n              isAdmin ? (\n                <AdminDashboard\n                  patients={patients}\n                  appointments={appointments}\n                  treatments={treatments}\n                  medicines={medicines}\n                  addPatient={addPatient}\n                  addTreatment={addTreatment}\n                  addMedicine={addMedicine}\n                  updateAppointmentStatus={updateAppointmentStatus}\n                  updateMedicineStock={updateMedicineStock}\n                />\n              ) : (\n                <Login onLogin={handleLogin} />\n              )\n            }\n          />\n\n          <Route\n            path=\"/patient\"\n            element={\n              user?.role === \"patient\" ? (\n                <PatientDashboard />\n              ) : (\n                <Login onLogin={handleLogin} />\n              )\n            }\n          />\n        </Routes>\n      </main>\n    </BrowserRouter>\n  );\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}